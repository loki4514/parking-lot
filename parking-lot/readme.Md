# ğŸ…¿ï¸ Parking Lot Management System

A comprehensive parking lot management system built in Go that implements various design patterns and provides a CLI interface for vehicle parking operations.

## ğŸ“‹ Table of Contents
- [Features](#features)
- [System Architecture](#system-architecture)
- [Installation](#installation)
- [Usage](#usage)
- [Design Patterns](#design-patterns)
- [Project Structure](#project-structure)
- [API Reference](#api-reference)
- [Configuration](#configuration)
- [Contributing](#contributing)

## âœ¨ Features

- **Multi-Vehicle Support**: Cars, Bikes, Bicycles, and Vans
- **Multi-Floor Parking**: 2-floor parking lot with configurable spots
- **Real-time Availability**: Dynamic spot allocation and tracking
- **Fee Calculation**: Strategy pattern-based pricing for different vehicle types
- **Ticket Management**: UUID-based ticket generation and validation
- **Payment Processing**: Cash and Card payment options
- **CLI Interface**: User-friendly command-line interface

## ğŸ—ï¸ System Architecture

### Vehicle Types & Pricing
| Vehicle Type | Hourly Rate | Spots (Floor 1) | Spots (Floor 2) |
|-------------|-------------|-----------------|-----------------|
| Bicycle     | â‚¹20/hour    | 50              | 40              |
| Bike        | â‚¹50/hour    | 50              | 40              |
| Car         | â‚¹100/hour   | 25              | 20              |
| Van         | â‚¹150/hour   | 25              | 20              |

### Parking Lot Layout
```
ğŸ“Š PARKING LOT CAPACITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vehicle     â”‚ Floor 1  â”‚ Floor 2  â”‚ Total â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Bicycles    â”‚    50    â”‚    40    â”‚   90  â”‚
â”‚ Bikes       â”‚    50    â”‚    40    â”‚   90  â”‚
â”‚ Cars        â”‚    25    â”‚    20    â”‚   45  â”‚
â”‚ Vans        â”‚    25    â”‚    20    â”‚   45  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ **Total**   â”‚  **150** â”‚  **120** â”‚ **270** â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Installation

### Prerequisites
- Go 1.19 or higher
- Git

### Setup
```bash
# Clone the repository
git clone https://github.com/loki4514/parking-lot.git
cd parking-lot

# Initialize Go modules
go mod init github.com/loki4514/parking-lot
go mod tidy

# Install dependencies
go get github.com/google/uuid

# Run the application
go run main.go
```

## ğŸ’» Usage

### Starting the System
```bash
go run main.go
```

### Available Commands
```
Available Commands:
ENTER â†’ Create Entry Ticket
EXIT  â†’ Exit Parking Lot  
Q     â†’ Quit
```

### Example Workflow

#### 1. Vehicle Entry
```
Enter your command: enter
Available Vehicle Types: Car, Bike, Bicycle, Van
Enter your vehicle type: car
âœ… Entry ticket created successfully! Ticket ID: 550e8400-e29b-41d4-a716-446655440000
```

#### 2. Vehicle Exit
```
Enter your command: exit
Enter your Ticket ID: 550e8400-e29b-41d4-a716-446655440000
ğŸ’° Parking fee: â‚¹150
Payment method (CASH / CARD): CASH
âœ… Payment successful via CASH.
âœ… Exit successful! Thank you for visiting.
```

## ğŸ¨ Design Patterns

### 1. Strategy Pattern
Used for fee calculation based on vehicle type:
```go
type FeeCalculation interface {
    CalculateFee(entryTime, exitTime time.Time) int
}

// Implementations: BicycleFeeCalculation, BikeFeeCalculation, etc.
```

### 2. Factory Pattern
Spot generation for different vehicle types:
```go
func GenerateSpots(bikeCount, cycleCount, carCount, vanCount int) []Spot
```

### 3. Repository Pattern
Ticket storage and retrieval operations:
```go
var Tickets = map[string]*Ticket{}
func CreateTicket(spotId, floorId, vehicleID string, vehicleType VehicleType) *Ticket
```

## ğŸ“ Project Structure

```
parking-lot/
â”œâ”€â”€ main.go                     # Main application entry point
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”œâ”€â”€ floor.go           # Floor structure and initialization
â”‚   â”‚   â”œâ”€â”€ parking_lot.go     # Main parking lot structure
â”‚   â”‚   â”œâ”€â”€ spot.go           # Parking spot management
â”‚   â”‚   â”œâ”€â”€ ticket.go         # Ticket structure and operations
â”‚   â”‚   â””â”€â”€ vehicle.go        # Vehicle types and definitions
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ entry_ticket.go   # Entry ticket creation service
â”‚       â”œâ”€â”€ fee_calculation.go # Strategy pattern for fee calculation
â”‚       â”œâ”€â”€ spot_finder.go    # Available spot finding logic
â”‚       â””â”€â”€ ticket_service.go # Ticket management operations
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â””â”€â”€ README.md
```

## ğŸ“š API Reference

### Core Data Structures

#### VehicleType
```go
type VehicleType string
const (
    Car     VehicleType = "Car"
    Bike    VehicleType = "Bike" 
    Bicycle VehicleType = "Bicycle"
    Van     VehicleType = "Van"
    Unknown VehicleType = "Unknown"
)
```

#### Ticket
```go
type Ticket struct {
    TicketID      string
    FloorID       string
    SpotID        string
    VehicleID     string
    VehicleType   VehicleType
    EntryTime     time.Time
    ExitTime      time.Time
    Fee           float64
    PaymentStatus bool
}
```

#### Spot
```go
type Spot struct {
    SpotId          string
    SpotVehicleType VehicleType
    Availability    bool
}
```

### Key Functions

#### Entry Operations
- `CreateEntryTicket(vehicle VehicleType, parkingLot *ParkingLot) (*Ticket, error)`
- `getSpot(vehicle VehicleType, parkingLot *ParkingLot) (string, string, error)`

#### Exit Operations
- `FindTicket(ticketId string) (string, string, VehicleType, time.Time, error)`
- `UpdateTicket(ticketId string, exitTime time.Time, fee int) (*Ticket, error)`
- `UpdatingSpot(floorId, spotId string, vehicle VehicleType, parkingLot *ParkingLot) error`

#### Fee Calculation
- `StrategyPattern(vehicleType VehicleType, entryTime, exitTime time.Time) int`

## âš™ï¸ Configuration

### Customizing Spot Distribution
Modify the floor generation functions in `storage/floor.go`:

```go
// First floor: 50 bike, 50 bicycle, 25 car, 25 van
func FirstFloor() Floor {
    spots := GenerateSpots(50, 50, 25, 25)
    // ... rest of the implementation
}
```

### Customizing Fee Structure
Modify the base rates in `services/fee_calculation.go`:

```go
// Bicycle: â‚¹20/hour
func (b *BicycleFeeCalculation) CalculateFee(entryTime, exitTime time.Time) int {
    return estimateFare(20, entryTime, exitTime)
}
```

## ğŸ”§ Improvements & Future Enhancements

### Current Limitations
- âš ï¸ **Thread Safety**: Not safe for concurrent access
- âš ï¸ **Data Persistence**: Uses in-memory storage only
- âš ï¸ **Error Recovery**: Limited error handling for edge cases

### Planned Features
- [ ] Database integration (PostgreSQL/MongoDB)
- [ ] REST API endpoints
- [ ] Web dashboard for parking lot management
- [ ] Real-time parking availability notifications
- [ ] Vehicle reservation system
- [ ] Integration with payment gateways
- [ ] Parking analytics and reporting
- [ ] Multi-tenant support for multiple parking lots

### Technical Improvements
- [ ] Add mutex locks for thread safety
- [ ] Implement proper logging with structured logs
- [ ] Add configuration file support (YAML/JSON)
- [ ] Unit and integration tests
- [ ] Docker containerization
- [ ] Health check endpoints
- [ ] Rate limiting for API calls

## ğŸ§ª Testing

```bash
# Run tests (when implemented)
go test ./...

# Run tests with coverage
go test -cover ./...

# Run specific package tests
go test ./internal/services
```

## ğŸ¤ Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

### Code Style Guidelines
- Follow standard Go formatting (`go fmt`)
- Use meaningful variable and function names
- Add comments for complex logic
- Maintain consistent error handling patterns

## ğŸ“ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ‘¨â€ğŸ’» Author

**loki4514**
- GitHub: [@loki4514](https://github.com/loki4514)

## ğŸ™ Acknowledgments

- Thanks to the Go community for excellent documentation
- Inspired by real-world parking management systems
- Design patterns reference from Gang of Four

---

â­ **Star this repo if you found it helpful!**